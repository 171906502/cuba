<?xml version='1.0' encoding='UTF-8' ?>
<server>
    <mbean code="com.haulmont.cuba.core.app.PersistenceConfig"
           name="haulmont.cuba:service=PersistenceConfig">
        <depends>jboss:service=TransactionManager</depends>
    </mbean>

    <mbean code="com.haulmont.cuba.core.app.ResourceRepository"
           name="haulmont.cuba:service=ResourceRepository">
        <depends>jboss:service=TransactionManager</depends>
    </mbean>

    <mbean code="com.haulmont.cuba.core.app.ConfigStorage"
           name="haulmont.cuba:service=ConfigStorage">
        <depends>haulmont.cuba:service=PersistenceConfig</depends>
    </mbean>

    <mbean code="com.haulmont.cuba.core.app.UniqueNumbers"
           name="haulmont.cuba:service=UniqueNumbers">
        <depends>haulmont.cuba:service=PersistenceConfig</depends>
    </mbean>

    <mbean code="com.haulmont.cuba.core.app.Emailer"
           name="haulmont.cuba:service=Emailer">
        <!--<depends>jboss:service=Mail</depends>-->
        <depends>haulmont.cuba:service=ConfigStorage</depends>
    </mbean>

    <mbean code="com.haulmont.cuba.security.app.EntityLog"
           name="haulmont.cuba:service=EntityLog">
        <depends>haulmont.cuba:service=ConfigStorage</depends>
    </mbean>

    <mbean code="com.haulmont.cuba.core.app.CubaDeployer"
           name="haulmont.cuba:service=CubaDeployer">
        <depends>haulmont.cuba:service=PersistenceConfig</depends>
        <depends>haulmont.cuba:service=ResourceRepository</depends>
        <depends>haulmont.cuba:service=ConfigStorage</depends>
        <depends>haulmont.cuba:service=EntityLog</depends>
        <depends>haulmont.cuba:service=Emailer</depends>
        <depends>haulmont.cuba:service=UniqueNumbers</depends>
    </mbean>
</server>
