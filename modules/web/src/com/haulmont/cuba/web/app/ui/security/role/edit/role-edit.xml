<window
    xmlns="http://www.haulmont.com/schema/cuba/gui/window.xsd"
    datasource="role"
    caption="msg://caption"
    class="com.haulmont.cuba.web.app.ui.security.role.edit.RoleEditor"
>
    <metadataContext>
        <deployViews name="/com/haulmont/cuba/web/app/ui/security/user/user.views.xml"/>
        <deployViews name="/com/haulmont/cuba/web/app/ui/security/group/group.views.xml"/>
    </metadataContext>

    <dsContext>
        <datasource
            id="role"
            class="com.haulmont.cuba.security.entity.Role"
            view="role.edit"
        >
            <collectionDatasource id="permissions" property="permissions"/>
        </datasource>

        <hierarchicalDatasource
            id="entityPermissions"
            class="com.haulmont.cuba.gui.config.PermissionConfig$Target"
            view="role.edit"
        >
            <datasourceClass>com.haulmont.cuba.gui.security.EntityPermissionTargetsDatasource</datasourceClass>
        </hierarchicalDatasource>

        <hierarchicalDatasource
            id="screenPermissions"
            class="com.haulmont.cuba.gui.config.PermissionConfig$Target"
            view="role.edit"
        >
            <datasourceClass>com.haulmont.cuba.gui.security.ScreenPermissionTargetsDatasource</datasourceClass>
        </hierarchicalDatasource>

        <hierarchicalDatasource
            id="specificPermissions"
            class="com.haulmont.cuba.gui.config.PermissionConfig$Target"
            view="role.edit"
        >
            <datasourceClass>com.haulmont.cuba.gui.security.SpecificPermissionTargetsDatasource</datasourceClass>
        </hierarchicalDatasource>
    </dsContext>

    <layout expand="permissions-pane">
        <hbox spacing="true">
            <label value="msg://name"/>
            <textField id="name" datasource="role" property="name"/>

            <label value="msg://superRole"/>
            <checkBox id="superRole" datasource="role" property="superRole"/>
        </hbox>
        <vbox id="permissions-pane" expand="roles" spacing="true">
            <tabsheet id="permissions-types">
                <tab id="entity-permissions" caption="msg://entity-permissions">
                    <tree id="entity-permissions-tree">
                        <treechildren datasource="entityPermissions"/>
                    </tree>
                </tab>
                <tab id="screen-permissions" caption="msg://screen-permissions">
                    <tree id="screen-permissions-tree">
                         <treechildren datasource="screenPermissions"/>
                    </tree>
                </tab>
                <tab id="specific-permissions" caption="msg://specific-permissions">
                    <tree id="specific-permissions-tree">
                          <treechildren datasource="specificPermissions"/>
                     </tree>
                </tab>
            </tabsheet>
        </vbox>
    </layout>
</window>
