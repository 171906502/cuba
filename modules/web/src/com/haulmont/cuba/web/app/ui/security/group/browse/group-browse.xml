<window
    messagesPack="com.haulmont.cuba.web.app.ui.security.group.browse"
    class="com.haulmont.cuba.web.app.ui.security.group.browse.GroupBrowser"
>
    <metadataContext>
        <deployViews name="/com/haulmont/cuba/web/app/ui/security/group/browse/group-browse.views.xml"/>
    </metadataContext>

    <dsContext>
        <collectionDatasource
            id="groups"
            class="com.haulmont.cuba.security.entity.Group"
            view="group-browse">
            <query>
                <![CDATA[select g from sec$Group g]]>
            </query>
        </collectionDatasource>

        <collectionDatasource
            id="users"
            class="com.haulmont.cuba.security.entity.User"
            view="group-browse">
            <query>select u from sec$User u where u.group.id = :ds$groups</query>
        </collectionDatasource>
    </dsContext>

    <layout>
        <vbox>
            <split orientation="horizontal" pos="30">
                <vbox>
                    <tree id="groups">
                        <treechildren datasource="groups" property="name" parent="parent"/>
                    </tree>
                </vbox>
                <vbox expand="group-editor">
                    <!--<hbox>-->
                        <!--<label value="msg://group.name"/>-->
                        <!--<textField id="group.name" datasource="groups" property="name"/>-->
                    <!--</hbox>-->
                    <tabsheet id="group-editor">
                        <tab id="users" caption="msg://tabsheet.users">
                            <vbox expand="users">
                                <hbox>
                                    <checkBox id="showDescendants"/>
                                    <label value="msg://showDescendants"/>
                                </hbox>
                                <hbox>
                                    <button id="users.create" action="users.create"/>
                                    <button id="users.edit" action="users.edit"/>
                                    <!--<button id="users.moveTo" action="users.moveTo"/>-->
                                </hbox>
                                <table id="users">
                                    <columns>
                                        <column id="name" caption="Name"/>
                                        <column id="login" caption="Login"/>
                                        <column id="activeDirectoryUser" caption="ActiveDirectory User"/>
                                    </columns>
                                    <rows datasource="users"/>
                                </table>
                            </vbox>
                        </tab>
                        <tab id="constraints" caption="msg://tabsheet.constraints">

                        </tab>
                    </tabsheet>
                </vbox>
            </split>
        </vbox>
    </layout>
</window>
