/*
 * Copyright (c) 2008-2016 Haulmont.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

@mixin flat-contextmenu($primary-stylename: v-contextmenu, $item-stylename: gwt-MenuItem) {
  .#{$primary-stylename} {
    @include cuba-flat-selection-overlay-style($item-stylename: $item-stylename);
  }

  &.small .#{$primary-stylename} {
    @include cuba-flat-selection-overlay-size-style($item-height: $v-selection-item-height--small, $font-size: $v-font-size--small);
  }

  &.large .#{$primary-stylename} {
    @include cuba-flat-selection-overlay-size-style($item-height: $v-selection-item-height--large, $font-size: $v-font-size--large);
  }
}

@mixin cuba-flat-selection-overlay-style($item-stylename: gwt-MenuItem) {
  @include cuba-flat-selection-overlay-size-style();
  @include box-shadow($v-window-shadow);

  color: var(--text-medium-color);
  border-radius: $v-overlay-border-radius;
  overflow: hidden;

  table {
    border-radius: $v-overlay-border-radius;
    overflow: hidden;
  }

  .#{$item-stylename} {
    @include cuba-flat-selection-item-size-style();
  }

  .#{$item-stylename}:hover,
  .#{$item-stylename}-selected {
    @include cuba-flat-selection-item-selected-style();
  }
}

@mixin cuba-flat-selection-item-size-style($item-height  : $v-selection-item-height,
                                           $font-size    : $v-font-size,
                                           $padding      : null) {
  height: $item-height;
  line-height: $item-height;

  @if type-of($padding) == number or type-of($padding) == list {
    padding: $padding;
  } @else {
    $padding-width: ceil($item-height/3);
    padding: 0 $padding-width 0 $padding-width;
  }

  &:before {
    display: none;
  }
}

@mixin cuba-flat-selection-item-selected-style() {
  background: var(--primary-color);
  color: var(--primary-text-color);
  text-shadow: none;

  &:active {
    background: var(--primary-active-color);
  }
}

@mixin cuba-flat-selection-overlay-size-style($item-height    : $v-selection-item-height,
                                              $font-size      : $v-font-size,
                                              $padding        : null,
                                              $item-stylename : gwt-MenuItem) {
  font-size: $font-size;

  .#{$item-stylename} {
    @include cuba-flat-selection-item-size-style($item-height: $item-height, $font-size: $font-size, $padding: $padding);
  }
}

@mixin flat-cuba-contextmenu($primary-stylename: c-cm-container) {
  .#{$primary-stylename} {
    @include box-shadow($v-window-shadow);
  }
}

@mixin flat-vaadin-contextmenu-addon($primary-stylename: v-menubar) {
  @include flat-contextmenu($primary-stylename: #{$primary-stylename}-popup, $item-stylename: #{$primary-stylename}-menuitem);

  .#{$primary-stylename}-popup {
    .#{$primary-stylename}-submenu {
      border-radius: $v-overlay-border-radius;
      overflow: hidden;
    }

    .#{$primary-stylename}-menuitem-selected:active {
      @include opacity(1);
    }
  }

}