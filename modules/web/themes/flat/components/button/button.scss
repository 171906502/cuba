/*
 * Copyright (c) 2008-2016 Haulmont.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

$cuba-button-border-width: 2px !default;

@mixin flat-button($primary-stylename: v-button) {
  .#{$primary-stylename} {
    @include cuba-flat-button-default-style;
  }

  .#{$primary-stylename}-primary,
  .#{$primary-stylename}.c-primary-action {
    @include cuba-flat-button-primary-style;
  }

  .#{$primary-stylename}-friendly {
    @include cuba-flat-button-friendly-style;
  }

  .#{$primary-stylename}-danger {
    @include cuba-flat-button-danger-style
  }

  .#{$primary-stylename}-link {
    border: 1px dashed transparent;
    background: transparent;
    color: var(--primary-color);

    &:hover:not(.v-disabled) {
      border-color: transparent;
      background: transparent;
      color: var(--primary-hover-color);
    }

    &:focus:not(.v-disabled) {
      border-color: var(--primary-color);
    }

    &:active:not(.v-disabled) {
      border-color: var(--primary-active-color);
      background: transparent;
      color: var(--primary-active-color);
    }

    &.v-disabled {
      border-color: transparent;
      background: transparent;
      color: var(--primary-disabled-color);
    }
  }

  .#{$primary-stylename}-borderless {
    @include cuba-flat-button-borderless-style();
  }

  .#{$primary-stylename}-borderless-colored {
    @include cuba-flat-button-borderless-style($main-color: --primary-color,
                                               $hover-color: --primary-hover-color,
                                               $active-color: --primary-active-color,
                                               $disabled-color: --primary-disabled-color);
  }

  .#{$primary-stylename}-quiet {
    &.v-disabled {
      border-color: transparent;
      background: transparent;
    }
  }

  &.small .#{$primary-stylename} {
    @include valo-button-style($unit-size: $v-unit-size--small, $bevel: null, $shadow: null, $background-color: null, $font-size: $v-font-size--small, $font-weight: null);
  }

  &.large .#{$primary-stylename} {
    @include valo-button-style($unit-size: $v-unit-size--large, $bevel: null, $shadow: null, $background-color: null, $font-size: $v-font-size--large, $font-weight: null);
  }
}

@mixin cuba-flat-button-default-style() {
  @include cuba-flat-button-color-style($main-color: --button-default-color,
                                        $text-color: --text-color,
                                        $hover-color: --button-default-hover-color,
                                        $active-color: --button-default-active-color,
                                        $disabled-color: --button-default-disabled-color,
                                        $disabled-text-color: --text-disabled-color);

  border-width: $cuba-button-border-width;
  border-style: solid;

  &:after {
    display: none;
  }
}

@mixin cuba-flat-button-primary-style() {
  @include cuba-flat-button-color-style($main-color: --primary-color,
                                        $text-color: --primary-text-color,
                                        $hover-color: --primary-hover-color,
                                        $active-color: --primary-active-color,
                                        $disabled-color: --primary-disabled-color,
                                        $disabled-text-color: --primary-disabled-text-color);
}

@mixin cuba-flat-button-friendly-style() {
  @include cuba-flat-button-color-style($main-color: --success-color,
                                        $text-color: --success-text-color,
                                        $hover-color: --success-hover-color,
                                        $active-color: --success-active-color,
                                        $disabled-color: --success-disabled-color,
                                        $disabled-text-color: --success-disabled-text-color);
}

@mixin cuba-flat-button-danger-style() {
  @include cuba-flat-button-color-style($main-color: --error-color,
                                        $text-color: --error-text-color,
                                        $hover-color: --error-hover-color,
                                        $active-color: --error-active-color,
                                        $disabled-color: --error-disabled-color,
                                        $disabled-text-color: --error-disabled-text-color);
}

@mixin cuba-flat-button-color-style($main-color,
                                    $text-color,
                                    $hover-color,
                                    $active-color,
                                    $disabled-color,
                                    $disabled-text-color) {
  border-color: var($main-color);
  background: var($main-color);
  color: var($text-color);

  &:hover:not(.v-disabled) {
    border-color: var($hover-color);
    background: var($hover-color);
  }

  &:active:not(.v-disabled) {
    border-color: var($active-color);
    background: var($active-color);
  }

  &:focus:not(.v-disabled) {
    border-color: var($disabled-color);
  }

  &.v-disabled {
    border-color: var($disabled-color);
    background: var($disabled-color);
    color: var($disabled-text-color);
  }
}

@mixin cuba-flat-button-borderless-style($main-color: --text-color,
                                         $hover-color: --text-color,
                                         $active-color: --text-color,
                                         $disabled-color: --text-disabled-color) {
  color: var($main-color);
  border-color: transparent;
  background: transparent;

  &:hover:not(.v-disabled) {
    color: var($hover-color);
    border-color: transparent;
    background: transparent;
  }

  &:focus:not(.v-disabled) {
    border-color: var($disabled-color);
  }

  &:active:not(.v-disabled) {
    color: var($active-color);
    border-color: var($active-color);
    background: transparent;
    @include opacity(1);
  }

  &.v-disabled {
    color: var($disabled-color);
    border-color: transparent;
    background: transparent;
  }
}